#!/bin/bash
# executable codun shall kodunu objdum la ayırıp
# c dosyasında code değişkenli bir değere atan
#program  3. satıra yazar
if([ -z  "$1" ] || [ -z "$2" ]);
then
	echo "1. değer olarak exe kodu olan dosya gir";
	echo "2. değer olarak shell code eklenecek c dosya adını gir";
	exit 1;
fi

code="char code = \"";


for i in $(objdump -d $1 |grep "^ " |cut -f2);
do 
	code="${code}\\x$i";
done; 
	code="${code}\";"; 
echo $code
sed -i  "3i ${code}" $2;

cat $2;


